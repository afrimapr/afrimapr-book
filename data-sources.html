<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Sources of data | The afrimapr book</title>
  <meta name="description" content="An introduction to making maps from African data in R." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Sources of data | The afrimapr book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="An introduction to making maps from African data in R." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Sources of data | The afrimapr book" />
  
  <meta name="twitter:description" content="An introduction to making maps from African data in R." />
  

<meta name="author" content="The afrimapr team" />


<meta name="date" content="2021-05-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="shiny.html"/>
<link rel="next" href="joining.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The afrimapr book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#why-read-this-book"><i class="fa fa-check"></i><b>1.1</b> Why read this book</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#who-for"><i class="fa fa-check"></i><b>1.2</b> Who for</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#what-this-book-will-not-cover"><i class="fa fa-check"></i><b>1.3</b> What this book will not cover</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#how-the-book-is-organised"><i class="fa fa-check"></i><b>1.4</b> How the book is organised</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#book-formatting"><i class="fa fa-check"></i><b>1.5</b> Book formatting</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="taster.html"><a href="taster.html"><i class="fa fa-check"></i><b>2</b> A taster - making your first map</a>
<ul>
<li class="chapter" data-level="2.1" data-path="taster.html"><a href="taster.html#a-simple-map"><i class="fa fa-check"></i><b>2.1</b> A simple map</a></li>
<li class="chapter" data-level="2.2" data-path="taster.html"><a href="taster.html#map-components"><i class="fa fa-check"></i><b>2.2</b> Map components</a></li>
<li class="chapter" data-level="2.3" data-path="taster.html"><a href="taster.html#static-maps"><i class="fa fa-check"></i><b>2.3</b> Static maps</a></li>
<li class="chapter" data-level="2.4" data-path="taster.html"><a href="taster.html#interactive-maps"><i class="fa fa-check"></i><b>2.4</b> Interactive maps</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rrecap.html"><a href="rrecap.html"><i class="fa fa-check"></i><b>3</b> R recap</a>
<ul>
<li class="chapter" data-level="" data-path="rrecap.html"><a href="rrecap.html#list-of-episodes"><i class="fa fa-check"></i>List of episodes</a></li>
<li class="chapter" data-level="3.1" data-path="rrecap.html"><a href="rrecap.html#wd"><i class="fa fa-check"></i><b>3.1</b> Setting working directory</a></li>
<li class="chapter" data-level="3.2" data-path="rrecap.html"><a href="rrecap.html#new_script"><i class="fa fa-check"></i><b>3.2</b> Creating, naming and saving a new R script</a></li>
<li class="chapter" data-level="3.3" data-path="rrecap.html"><a href="rrecap.html#executing"><i class="fa fa-check"></i><b>3.3</b> Executing the code</a></li>
<li class="chapter" data-level="3.4" data-path="rrecap.html"><a href="rrecap.html#install_packages"><i class="fa fa-check"></i><b>3.4</b> Install and load packages</a></li>
<li class="chapter" data-level="3.5" data-path="rrecap.html"><a href="rrecap.html#load_data"><i class="fa fa-check"></i><b>3.5</b> Load data</a></li>
<li class="chapter" data-level="3.6" data-path="rrecap.html"><a href="rrecap.html#data_basics"><i class="fa fa-check"></i><b>3.6</b> Basic data types</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="rrecap.html"><a href="rrecap.html#numeric-and-integer"><i class="fa fa-check"></i><b>3.6.1</b> Numeric and integer</a></li>
<li class="chapter" data-level="3.6.2" data-path="rrecap.html"><a href="rrecap.html#characters"><i class="fa fa-check"></i><b>3.6.2</b> Characters</a></li>
<li class="chapter" data-level="3.6.3" data-path="rrecap.html"><a href="rrecap.html#logical"><i class="fa fa-check"></i><b>3.6.3</b> Logical</a></li>
<li class="chapter" data-level="3.6.4" data-path="rrecap.html"><a href="rrecap.html#factors"><i class="fa fa-check"></i><b>3.6.4</b> Factors</a></li>
<li class="chapter" data-level="3.6.5" data-path="rrecap.html"><a href="rrecap.html#exercises"><i class="fa fa-check"></i><b>3.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rrecap.html"><a href="rrecap.html#objects_basics"><i class="fa fa-check"></i><b>3.7</b> Basic objects and data structures</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="rrecap.html"><a href="rrecap.html#vector"><i class="fa fa-check"></i><b>3.7.1</b> Vector</a></li>
<li class="chapter" data-level="3.7.2" data-path="rrecap.html"><a href="rrecap.html#matrix"><i class="fa fa-check"></i><b>3.7.2</b> Matrix</a></li>
<li class="chapter" data-level="3.7.3" data-path="rrecap.html"><a href="rrecap.html#data-frame"><i class="fa fa-check"></i><b>3.7.3</b> Data frame</a></li>
<li class="chapter" data-level="3.7.4" data-path="rrecap.html"><a href="rrecap.html#exercises-1"><i class="fa fa-check"></i><b>3.7.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="rrecap.html"><a href="rrecap.html#help"><i class="fa fa-check"></i><b>3.8</b> Getting help with R Help</a></li>
<li class="chapter" data-level="3.9" data-path="rrecap.html"><a href="rrecap.html#further-resources"><i class="fa fa-check"></i><b>3.9</b> Further resources</a></li>
<li class="chapter" data-level="3.10" data-path="rrecap.html"><a href="rrecap.html#summary"><i class="fa fa-check"></i><b>3.10</b> Summary</a></li>
<li class="chapter" data-level="3.11" data-path="rrecap.html"><a href="rrecap.html#solutions_ch3"><i class="fa fa-check"></i><b>3.11</b> Exercise solutions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-types.html"><a href="data-types.html"><i class="fa fa-check"></i><b>4</b> Spatial data in R</a>
<ul>
<li class="chapter" data-level="" data-path="data-types.html"><a href="data-types.html#list-of-episodes-1"><i class="fa fa-check"></i>List of episodes</a></li>
<li class="chapter" data-level="4.1" data-path="data-types.html"><a href="data-types.html#episode_1_points"><i class="fa fa-check"></i><b>4.1</b> Points</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-types.html"><a href="data-types.html#example"><i class="fa fa-check"></i><b>4.1.1</b> Example</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-types.html"><a href="data-types.html#exercises-2"><i class="fa fa-check"></i><b>4.1.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-types.html"><a href="data-types.html#episode_2_lines"><i class="fa fa-check"></i><b>4.2</b> Lines</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data-types.html"><a href="data-types.html#example-1"><i class="fa fa-check"></i><b>4.2.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-types.html"><a href="data-types.html#episode_3_polygons"><i class="fa fa-check"></i><b>4.3</b> Polygons</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="data-types.html"><a href="data-types.html#example-2"><i class="fa fa-check"></i><b>4.3.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-types.html"><a href="data-types.html#episode_4_raster"><i class="fa fa-check"></i><b>4.4</b> Rasters</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data-types.html"><a href="data-types.html#example-3"><i class="fa fa-check"></i><b>4.4.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data-types.html"><a href="data-types.html#further-resources-1"><i class="fa fa-check"></i><b>4.5</b> Further resources</a></li>
<li class="chapter" data-level="4.6" data-path="data-types.html"><a href="data-types.html#summarykey-points"><i class="fa fa-check"></i><b>4.6</b> Summary/key points</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualising1.html"><a href="visualising1.html"><i class="fa fa-check"></i><b>5</b> Visualising spatial data part 1: tmap and mapview</a>
<ul>
<li class="chapter" data-level="5.1" data-path="visualising1.html"><a href="visualising1.html#overall-goal-of-the-chapter"><i class="fa fa-check"></i><b>5.1</b> Overall goal of the chapter</a></li>
<li class="chapter" data-level="5.2" data-path="visualising1.html"><a href="visualising1.html#quick-interactive-maps-with-mapview"><i class="fa fa-check"></i><b>5.2</b> Quick interactive maps with mapview</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="visualising1.html"><a href="visualising1.html#exercises-3"><i class="fa fa-check"></i><b>5.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="visualising1.html"><a href="visualising1.html#static-maps-with-tmap"><i class="fa fa-check"></i><b>5.3</b> Static maps with tmap</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="visualising1.html"><a href="visualising1.html#colour-setting-and-colour-pallete"><i class="fa fa-check"></i><b>5.3.1</b> Colour setting and colour pallete</a></li>
<li class="chapter" data-level="5.3.2" data-path="visualising1.html"><a href="visualising1.html#visualising-different-datasets-in-one-map"><i class="fa fa-check"></i><b>5.3.2</b> Visualising different datasets in one map</a></li>
<li class="chapter" data-level="5.3.3" data-path="visualising1.html"><a href="visualising1.html#exercises-4"><i class="fa fa-check"></i><b>5.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="visualising1.html"><a href="visualising1.html#interactive-maps-with-tmap"><i class="fa fa-check"></i><b>5.4</b> Interactive maps with tmap</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="visualising1.html"><a href="visualising1.html#visualising-subsets-of-data"><i class="fa fa-check"></i><b>5.4.1</b> Visualising subsets of data</a></li>
<li class="chapter" data-level="5.4.2" data-path="visualising1.html"><a href="visualising1.html#exercises-5"><i class="fa fa-check"></i><b>5.4.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="visualising1.html"><a href="visualising1.html#further-resources-2"><i class="fa fa-check"></i><b>5.5</b> Further resources</a></li>
<li class="chapter" data-level="5.6" data-path="visualising1.html"><a href="visualising1.html#summary-1"><i class="fa fa-check"></i><b>5.6</b> Summary</a></li>
<li class="chapter" data-level="5.7" data-path="visualising1.html"><a href="visualising1.html#solutions_ch5"><i class="fa fa-check"></i><b>5.7</b> Exercise solutions</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="shiny.html"><a href="shiny.html"><i class="fa fa-check"></i><b>6</b> Shiny interactive map applications</a></li>
<li class="chapter" data-level="7" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>7</b> Sources of data</a>
<ul>
<li class="chapter" data-level="7.1" data-path="data-sources.html"><a href="data-sources.html#administrative-boundaries"><i class="fa fa-check"></i><b>7.1</b> Administrative boundaries</a></li>
<li class="chapter" data-level="7.2" data-path="data-sources.html"><a href="data-sources.html#population"><i class="fa fa-check"></i><b>7.2</b> Population</a></li>
<li class="chapter" data-level="7.3" data-path="data-sources.html"><a href="data-sources.html#open-street-map-data"><i class="fa fa-check"></i><b>7.3</b> Open Street Map data</a></li>
<li class="chapter" data-level="7.4" data-path="data-sources.html"><a href="data-sources.html#elevation"><i class="fa fa-check"></i><b>7.4</b> Elevation</a></li>
<li class="chapter" data-level="7.5" data-path="data-sources.html"><a href="data-sources.html#temperature"><i class="fa fa-check"></i><b>7.5</b> Temperature</a></li>
<li class="chapter" data-level="7.6" data-path="data-sources.html"><a href="data-sources.html#rainfall"><i class="fa fa-check"></i><b>7.6</b> Rainfall</a></li>
<li class="chapter" data-level="7.7" data-path="data-sources.html"><a href="data-sources.html#vegetation-and-land-cover"><i class="fa fa-check"></i><b>7.7</b> Vegetation and Land cover</a></li>
<li class="chapter" data-level="7.8" data-path="data-sources.html"><a href="data-sources.html#demographic-and-health-survey-dhs"><i class="fa fa-check"></i><b>7.8</b> Demographic and Health Survey (DHS)</a></li>
<li class="chapter" data-level="7.9" data-path="data-sources.html"><a href="data-sources.html#malaria"><i class="fa fa-check"></i><b>7.9</b> Malaria</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="joining.html"><a href="joining.html"><i class="fa fa-check"></i><b>8</b> Join non-spatial data onto spatial</a></li>
<li class="chapter" data-level="9" data-path="raster.html"><a href="raster.html"><i class="fa fa-check"></i><b>9</b> Raster manipulation</a></li>
<li class="chapter" data-level="10" data-path="openstreetmap.html"><a href="openstreetmap.html"><i class="fa fa-check"></i><b>10</b> OpenStreetMap data</a></li>
<li class="chapter" data-level="11" data-path="data-editing.html"><a href="data-editing.html"><i class="fa fa-check"></i><b>11</b> Creating and editing spatial data</a>
<ul>
<li class="chapter" data-level="11.1" data-path="data-editing.html"><a href="data-editing.html#create-a-vector-file-from-scratch"><i class="fa fa-check"></i><b>11.1</b> Create a vector file from scratch</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualising2.html"><a href="visualising2.html"><i class="fa fa-check"></i><b>12</b> Visualising spatial data part 2</a></li>
<li class="chapter" data-level="13" data-path="case-study1.html"><a href="case-study1.html"><i class="fa fa-check"></i><b>13</b> Case study 1</a>
<ul>
<li class="chapter" data-level="13.1" data-path="case-study1.html"><a href="case-study1.html#health-facility-locations-probably"><i class="fa fa-check"></i><b>13.1</b> Health facility locations (probably)</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="case-study2.html"><a href="case-study2.html"><i class="fa fa-check"></i><b>14</b> Case study 2</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="15" data-path="template.html"><a href="template.html"><i class="fa fa-check"></i><b>15</b> Template chapter</a>
<ul>
<li class="chapter" data-level="15.1" data-path="template.html"><a href="template.html#linking-section-1"><i class="fa fa-check"></i><b>15.1</b> Linking section 1</a></li>
<li class="chapter" data-level="15.2" data-path="template.html"><a href="template.html#overall-goal-of-the-chapter-1"><i class="fa fa-check"></i><b>15.2</b> Overall goal of the chapter</a>
<ul>
<li class="chapter" data-level="" data-path="template.html"><a href="template.html#list-of-episodes-2"><i class="fa fa-check"></i>List of episodes</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="template.html"><a href="template.html#episode_1_template"><i class="fa fa-check"></i><b>15.3</b> Episode 1 (topic 1)</a></li>
<li class="chapter" data-level="15.4" data-path="template.html"><a href="template.html#episode_2_template"><i class="fa fa-check"></i><b>15.4</b> Episode 2 (topic 2)</a></li>
<li class="chapter" data-level="15.5" data-path="template.html"><a href="template.html#episode_3_template"><i class="fa fa-check"></i><b>15.5</b> Episode 3 (topic 3)</a></li>
<li class="chapter" data-level="15.6" data-path="template.html"><a href="template.html#further-resources-3"><i class="fa fa-check"></i><b>15.6</b> Further resources</a></li>
<li class="chapter" data-level="15.7" data-path="template.html"><a href="template.html#summary-2"><i class="fa fa-check"></i><b>15.7</b> Summary</a></li>
<li class="chapter" data-level="15.8" data-path="template.html"><a href="template.html#exercise-solutions"><i class="fa fa-check"></i><b>15.8</b> Exercise solutions</a></li>
<li class="chapter" data-level="15.9" data-path="template.html"><a href="template.html#feedback"><i class="fa fa-check"></i><b>15.9</b> Feedback</a></li>
<li class="chapter" data-level="15.10" data-path="template.html"><a href="template.html#putting-into-practice"><i class="fa fa-check"></i><b>15.10</b> Putting into practice</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/afrimapr/book" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The afrimapr book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-sources" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> Sources of data</h1>
<p>Here we show several R packages that can be used to download spatial data including administrative boundaries, population, climatic, and health data.
We give short reproducible examples on how to download and visualize spatial data that can be useful in different settings.
More extended examples and details about the capabilities of each of the packages can be seen at <a href="https://rspatialdata.github.io/" class="uri">https://rspatialdata.github.io/</a> and the packages’ websites.</p>
<div id="administrative-boundaries" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Administrative boundaries</h2>
<p>We can download administrative boundaries of countries with the <code>rgeoboundaries</code> package.
For example, we can download the administrative boundaries of Nigeria with <code>geoboundaries()</code> as follows.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="data-sources.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgeoboundaries)</span>
<span id="cb155-2"><a href="data-sources.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb155-3"><a href="data-sources.html#cb155-3" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">geoboundaries</span>(<span class="st">&quot;Nigeria&quot;</span>)</span>
<span id="cb155-4"><a href="data-sources.html#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> map) <span class="sc">+</span> <span class="fu">geom_sf</span>() </span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-76-1.png" width="672" /></p>
<p>We can also download administrative boundaries of multiple countries and different administrative levels.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-sources.html#cb156-1" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">geoboundaries</span>(<span class="fu">c</span>(<span class="st">&quot;Nigeria&quot;</span>, <span class="st">&quot;Chad&quot;</span>), <span class="st">&quot;adm1&quot;</span>)</span>
<span id="cb156-2"><a href="data-sources.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> map) <span class="sc">+</span> <span class="fu">geom_sf</span>()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-77-1.png" width="672" /></p>
</div>
<div id="population" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Population</h2>
<p>The <code>wopr</code> package provides access to the <a href="https://wopr.worldpop.org/">WorldPop Open Population Repository</a> and provides estimates of population sizes for specific geographic areas.</p>
<p>To download the population data we first use <code>getCatalogue()</code> to retrieve the WOPR data catalogue and see a list of currently available databases.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="data-sources.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;remotes&quot;)</span></span>
<span id="cb157-2"><a href="data-sources.html#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(remotes)</span></code></pre></div>
<pre><code>## Warning: package &#39;remotes&#39; was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data-sources.html#cb159-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;wpgp/wopr&#39;</span>)</span></code></pre></div>
<pre><code>## Skipping install of &#39;wopr&#39; from a github remote, the SHA1 (6a4abcf0) has not changed since last install.
##   Use `force = TRUE` to force installation</code></pre>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="data-sources.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wopr)</span>
<span id="cb161-2"><a href="data-sources.html#cb161-2" aria-hidden="true" tabindex="-1"></a>catalogue <span class="ot">&lt;-</span> <span class="fu">getCatalogue</span>(<span class="at">spatial_query =</span> T)</span></code></pre></div>
<pre><code>## Registered S3 method overwritten by &#39;httr&#39;:
##   method           from  
##   print.cache_info hoardr</code></pre>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data-sources.html#cb163-1" aria-hidden="true" tabindex="-1"></a>catalogue</span></code></pre></div>
<pre><code>##     country version
## 25      BFA    v1.0
## 64      COD    v1.0
## 70      COD    v2.0
## 134     GHA    v2.0
## 197     MOZ    v1.1
## 241     NGA    v1.2
## 281     SSD    v2.0
## 338     ZMB    v1.0</code></pre>
<p>Then, we subset the catalogue for the country (e.g. Nigeria with ISO code NGA) and download the data for the selection using the <code>downloadData()</code> function.</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data-sources.html#cb165-1" aria-hidden="true" tabindex="-1"></a>selection <span class="ot">&lt;-</span> <span class="fu">subset</span>(catalogue, country <span class="sc">==</span> <span class="st">&quot;NGA&quot;</span> <span class="sc">&amp;</span> category <span class="sc">==</span> <span class="st">&quot;Population&quot;</span> <span class="sc">&amp;</span> version <span class="sc">==</span> <span class="st">&quot;v1.2&quot;</span>)</span>
<span id="cb165-2"><a href="data-sources.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="fu">downloadData</span>(selection)</span></code></pre></div>
<p>Finally, we use the <code>sf</code> package to read in the downloaded shapefile and plot it with <code>ggplot()</code>.</p>
<p>[Paula: I’ve set this to eval=FALSE for now to avoid filenotfound error, can we make this runnable ?, Andy]</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data-sources.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb166-2"><a href="data-sources.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb166-3"><a href="data-sources.html#cb166-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-4"><a href="data-sources.html#cb166-4" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/NGA_population_v1_2_admin_level2_boundaries.shp&quot;</span>)</span></code></pre></div>
<pre><code>## Reading layer `NGA_population_v1_2_admin_level2_boundaries&#39; from data source `C:\Users\User\OneDrive - University of Leeds\Documents\afrimapr-book\data\NGA_population_v1_2_admin_level2_boundaries.shp&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 37 features and 17 fields
## Geometry type: MULTIPOLYGON
## Dimension:     XY
## Bounding box:  xmin: 2.6925 ymin: 4.271484 xmax: 14.67797 ymax: 13.88571
## Geodetic CRS:  WGS 84</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data-sources.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map, <span class="fu">aes</span>(<span class="at">fill =</span> mean)) <span class="sc">+</span> <span class="fu">geom_sf</span>() <span class="sc">+</span></span>
<span id="cb168-2"><a href="data-sources.html#cb168-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Population&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/c7-data-NGA-1.png" width="672" /></p>
</div>
<div id="open-street-map-data" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> Open Street Map data</h2>
<p>We can retrieve <a href="https://www.openstreetmap.org/">Open Street Map data</a> using the <code>osmdata</code> package. The <code>available_features()</code> function can be used to get the list of recognized features in OSM.
The <code>available_tags()</code> function lists out the tags associated with each feature.
A list of the available features can be found in the <a href="https://wiki.openstreetmap.org/wiki/Map_Features">OSM wiki</a>.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="data-sources.html#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(osmdata)</span></code></pre></div>
<pre><code>## Warning: package &#39;osmdata&#39; was built under R version 4.0.5</code></pre>
<pre><code>## Data (c) OpenStreetMap contributors, ODbL 1.0. https://www.openstreetmap.org/copyright</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="data-sources.html#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">available_features</span>())</span></code></pre></div>
<pre><code>## [1] &quot;4wd_only&quot;  &quot;abandoned&quot; &quot;abutters&quot;  &quot;access&quot;    &quot;addr&quot;      &quot;addr:city&quot;</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="data-sources.html#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">available_tags</span>(<span class="st">&quot;amenity&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;animal_boarding&quot; &quot;animal_breeding&quot; &quot;animal_shelter&quot;  &quot;arts_centre&quot;     &quot;atm&quot;             &quot;baby_hatch&quot;</code></pre>
<p>The first step in creating an <code>osmdata</code> query is defining the geographical area we wish to include in the query. This can be done by defining a bounding box that defines a geographical area by its bounding latitudes and longitudes.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="data-sources.html#cb176-1" aria-hidden="true" tabindex="-1"></a>lagos_bb <span class="ot">&lt;-</span> <span class="fu">getbb</span>(<span class="st">&quot;Lagos&quot;</span>)</span>
<span id="cb176-2"><a href="data-sources.html#cb176-2" aria-hidden="true" tabindex="-1"></a>lagos_bb</span></code></pre></div>
<pre><code>##        min      max
## x 3.234180 3.554180
## y 6.295058 6.615057</code></pre>
<p>To retrieve the required features of a place (defined by the bounding box), we have to then create an overpass query with <code>opq()</code>.
Then, the <code>add_osm_feature()</code> function can be used to add the required features to the query. Finally, we use the <code>osmdata_sf()</code> function to obtain a simple feature object of the resultant query.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="data-sources.html#cb178-1" aria-hidden="true" tabindex="-1"></a>lagos_hospitals <span class="ot">&lt;-</span> lagos_bb <span class="sc">%&gt;%</span> <span class="fu">opq</span>() <span class="sc">%&gt;%</span></span>
<span id="cb178-2"><a href="data-sources.html#cb178-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_osm_feature</span>(<span class="at">key =</span> <span class="st">&quot;amenity&quot;</span>, <span class="at">value =</span> <span class="st">&quot;hospital&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb178-3"><a href="data-sources.html#cb178-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">osmdata_sf</span>()</span></code></pre></div>
<p>We can visualise an interactive map of the hospitals in Lagos as follows.</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data-sources.html#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb179-2"><a href="data-sources.html#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>() <span class="sc">%&gt;%</span>  <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb179-3"><a href="data-sources.html#cb179-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addPolygons</span>(<span class="at">data =</span> lagos_hospitals<span class="sc">$</span>osm_polygons,</span>
<span id="cb179-4"><a href="data-sources.html#cb179-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> lagos_hospitals<span class="sc">$</span>osm_polygons<span class="sc">$</span>name)</span></code></pre></div>
<div id="htmlwidget-b264d38a2aada8d9201d" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-b264d38a2aada8d9201d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addPolygons","args":[[[[{"lng":[3.3879416,3.3870162,3.3866818,3.3848376,3.386569,3.3873583,3.3881526,3.3882941,3.3889711,3.3887527,3.3886271,3.388594,3.3881013,3.3880034,3.3879416],"lat":[6.5542207,6.5541097,6.5543968,6.5525167,6.5511423,6.5504759,6.5508598,6.5509942,6.5515684,6.5519514,6.5519812,6.5522151,6.5532259,6.5540817,6.5542207]}]],[[{"lng":[3.3681755,3.3681953,3.3682322,3.3679506,3.367964,3.3676778,3.3676868,3.369322,3.3695373,3.3700726,3.3715489,3.3724542,3.3728672,3.3734057,3.3735859,3.3736072,3.3736125,3.3736024,3.3735694,3.3735594,3.3735715,3.3733498,3.3724809,3.3709842,3.3695278,3.368699,3.3681755],"lat":[6.532734,6.5321606,6.5310949,6.5310923,6.5305353,6.5305248,6.529706,6.5300765,6.5301253,6.5302916,6.5305642,6.5303645,6.5304715,6.53049,6.530506,6.530888,6.5309826,6.531487,6.5319167,6.5320472,6.5324553,6.5331544,6.532931,6.5328457,6.5327924,6.5327566,6.532734]}]],[[{"lng":[3.4369585,3.4370621,3.4372653,3.4373038,3.4374614,3.4374953,3.4375116,3.4376827,3.4378875,3.4378218,3.4376453,3.4376202,3.4373055,3.4372853,3.4372301,3.4369585],"lat":[6.4460012,6.4457112,6.4457795,6.4456797,6.445667,6.445537,6.445457,6.4455146,6.4455835,6.4457629,6.4462445,6.4462356,6.4461245,6.4461175,6.4460985,6.4460012]}]],[[{"lng":[3.3568566,3.3573568,3.3574587,3.3569585,3.3568566],"lat":[6.5834889,6.5836834,6.5834316,6.5832331,6.5834889]}]],[[{"lng":[3.420182,3.4207523,3.420635,3.4205885,3.4204135,3.4201467,3.4201385,3.4201306,3.4200905,3.4200791,3.4201586,3.420182],"lat":[6.4332741,6.4331235,6.4326832,6.4326959,6.4327441,6.4328174,6.4328546,6.4328911,6.4329023,6.4329047,6.4331902,6.4332741]}]],[[{"lng":[3.4560249,3.4561498,3.4561533,3.4563991,3.4563991,3.4564215,3.4564582,3.4564586,3.4562689,3.4561521,3.4560249],"lat":[6.4394842,6.439602,6.4397273,6.4397255,6.4396826,6.4396605,6.43966,6.4394448,6.4394442,6.4393578,6.4394842]}]],[[{"lng":[3.505188,3.5051797,3.5052098,3.5052036,3.5051727,3.5051586,3.5051591,3.5051719,3.505194,3.5052241,3.5056984,3.5056832,3.505188],"lat":[6.4344648,6.4345939,6.4346271,6.4346939,6.4347026,6.4349196,6.4349513,6.4349741,6.4349864,6.4349917,6.4350385,6.4345095,6.4344648]}]],[[{"lng":[3.4290805,3.429164,3.4292709,3.4295033,3.4292069,3.4289924,3.428983,3.4289186,3.4288703,3.428818,3.4285981,3.428666,3.4287335,3.4290983,3.4291318,3.4290805],"lat":[6.4433276,6.4433482,6.4430498,6.4424007,6.4424127,6.4424966,6.442478,6.44247,6.4424194,6.442402,6.4423514,6.442668,6.4429831,6.4430537,6.443095,6.4433276]}]],[[{"lng":[3.3958197,3.3957649,3.3957532,3.3957397,3.3955232,3.3954115,3.3954153,3.3960519,3.3964529,3.3966528,3.3967113,3.3967879,3.3969659,3.3970528,3.3973409,3.3973953,3.3977544,3.3977038,3.397677,3.3977122,3.3978541,3.3976272,3.397609,3.3968522,3.3967058,3.3965582,3.3965228,3.3964749,3.3961821,3.3960981,3.3958197],"lat":[6.4485127,6.4484039,6.4483837,6.4483608,6.4479601,6.4477556,6.4476863,6.4472802,6.4469954,6.4468411,6.4467942,6.4467358,6.4466003,6.4465331,6.4463045,6.446375,6.4468755,6.446925,6.4469494,6.4470005,6.4471925,6.4473581,6.4473716,6.4479345,6.448049,6.4481375,6.4481652,6.4481047,6.4483335,6.4483744,6.4485127]}]],[[{"lng":[3.3444917,3.3445296,3.3445537,3.344661,3.3438268,3.3433413,3.3428693,3.3425662,3.3420512,3.3418983,3.3422336,3.3416623,3.3412331,3.3410481,3.3406612,3.3403212,3.3398974,3.3398708,3.3397686,3.3400851,3.3400411,3.3398292,3.3397418,3.3400328,3.3405599,3.3410668,3.340804,3.3401307,3.3401504,3.3401823,3.3402085,3.3401415,3.3401388,3.340179,3.3403426,3.340745,3.3422068,3.3427003,3.3428666,3.3430007,3.343057,3.3430235,3.3430409,3.3431187,3.3431523,3.3432032,3.3442533,3.3444947,3.3444766,3.3444917],"lat":[6.5909877,6.5909641,6.5909854,6.5908389,6.5899729,6.5894667,6.5889764,6.5892642,6.5887339,6.5885927,6.588273,6.5876921,6.5872391,6.5874257,6.5873051,6.5871992,6.5870713,6.5871131,6.5872738,6.5879106,6.5880199,6.5883743,6.5885234,6.5888392,6.5893614,6.5898557,6.5900955,6.5907589,6.5907818,6.590819,6.5908495,6.5909375,6.5909748,6.591036,6.5911133,6.5913025,6.5918301,6.5920059,6.5919926,6.5919366,6.5919033,6.5918514,6.5918447,6.5917808,6.5917581,6.5917901,6.5911719,6.5910181,6.5910001,6.5909877]}]],[[{"lng":[3.2510138,3.2535265,3.2530092,3.2503709,3.2510138],"lat":[6.5627677,6.5620042,6.5599999,6.5606973,6.5627677]}]],[[{"lng":[3.4057919,3.4058357,3.4053896,3.4050315,3.4051764,3.4054384,3.4055746,3.4057919],"lat":[6.4443262,6.444822,6.4451212,6.4447121,6.4445924,6.4443818,6.4442694,6.4443262]}]],[[{"lng":[3.3979508,3.3976116,3.3973687,3.3977079,3.3979508],"lat":[6.4494278,6.4489219,6.4490828,6.4495886,6.4494278]}]],[[{"lng":[3.3972393,3.3970956,3.3971464,3.3975027,3.3975828,3.397681,3.3973135,3.3972393],"lat":[6.448899,6.4486827,6.4486405,6.4483925,6.448494,6.4486264,6.4489057,6.448899]}]],[[{"lng":[3.3923634,3.3923792,3.3925045,3.3924649,3.3924115,3.3921738,3.3919891,3.3923634],"lat":[6.45531,6.455289,6.4551089,6.4550504,6.4549794,6.4548173,6.4550926,6.45531]}]],[[{"lng":[3.3014129,3.3032976,3.3031418,3.3034174,3.3030549,3.3018062,3.3016699,3.3018295,3.3018451,3.3017463,3.3012086,3.3013483,3.3013483,3.3013836,3.3013916,3.301409,3.3013739,3.3014129],"lat":[6.4604225,6.460407,6.4612195,6.4615926,6.461788,6.4626744,6.4624074,6.4623145,6.4621172,6.4621113,6.4621043,6.4616194,6.4614146,6.461418,6.4613351,6.4611538,6.4610764,6.4604225]}]],[[{"lng":[3.2895759,3.2898819,3.2895368,3.2894734,3.2894285,3.2893893,3.2891917,3.2895759],"lat":[6.476061,6.4757914,6.4754048,6.4754607,6.4755003,6.4754564,6.4756305,6.476061]}]],[[{"lng":[3.3520403,3.3520733,3.3520279,3.3519649,3.3518802,3.3517821,3.3519287,3.3530839,3.3540803,3.3541243,3.3541544,3.3541983,3.3542419,3.3542337,3.3542775,3.3550924,3.3552401,3.3552373,3.357764,3.3586588,3.3590088,3.3589437,3.3596776,3.3596807,3.3587951,3.3574884,3.3573459,3.3559022,3.3556198,3.355182,3.3550722,3.3549516,3.3541694,3.3542101,3.3541604,3.3540135,3.3539681,3.3539436,3.3530741,3.3524675,3.3523237,3.3523658,3.3524009,3.3523495,3.3522817,3.352187,3.3518223,3.3515594,3.351356,3.3513245,3.3513841,3.3515699,3.3516505,3.3516996,3.3518609,3.3519941,3.3520403],"lat":[6.5211661,6.5214194,6.5216076,6.5217817,6.521925,6.522047,6.5224051,6.5221321,6.5219485,6.5219762,6.5220631,6.5220563,6.5220495,6.5219517,6.5219083,6.5217316,6.521699,6.5213323,6.5207618,6.5196143,6.519162,6.519079,6.518116,6.5179837,6.5173869,6.516464,6.5163563,6.5152654,6.5152883,6.5157828,6.5159068,6.5159407,6.516633,6.5168691,6.5168892,6.5169362,6.5169527,6.5168377,6.5176215,6.518158,6.5182834,6.5186527,6.5187851,6.518826,6.5188791,6.5188129,6.5190219,6.5192379,6.5194086,6.5195166,6.5196768,6.5199869,6.5201576,6.5204641,6.520802,6.5211364,6.5211661]}]],[[{"lng":[3.3568871,3.3571103,3.3570996,3.3578219,3.3579076,3.3580176,3.3578328,3.3577026,3.3576048,3.3573879,3.3571648,3.3570568,3.3568871],"lat":[6.508001,6.507955,6.507894,6.5077719,6.5078888,6.5079775,6.5083166,6.5085481,6.5086392,6.5087396,6.5088353,6.5088615,6.508001]}]],[[{"lng":[3.5000429,3.500392,3.5008914,3.5012447,3.5008508,3.5010132,3.5003433,3.5003078,3.5002865,3.5000957,3.4992999,3.4986218,3.4990412,3.5000429],"lat":[6.6105552,6.6103213,6.609809,6.6095872,6.6089016,6.6087806,6.6076594,6.6071351,6.6068205,6.6066228,6.6075343,6.6082563,6.6089424,6.6105552]}]],[[{"lng":[3.319058,3.3183686,3.3179516,3.317906,3.3194724,3.3199552,3.3205935,3.3205265,3.3204836,3.3203762,3.3201215,3.3196387,3.3195931,3.3194925,3.3194911,3.3194105,3.3193544,3.3193423,3.319058],"lat":[6.528101,6.5280011,6.5279331,6.5262077,6.525704,6.5275827,6.527159,6.5282436,6.5283597,6.5286469,6.52859,6.5285287,6.5285262,6.52853,6.5284954,6.5284966,6.5284967,6.528173,6.528101]}]],[[{"lng":[3.3613477,3.3610983,3.3611023,3.3612163,3.3613692,3.3613611,3.3613598,3.3613477],"lat":[6.4957053,6.4955987,6.4954695,6.4955094,6.4955614,6.495664,6.495712,6.4957053]}]],[[{"lng":[3.5220945,3.5222715,3.5227141,3.5226202,3.5220945],"lat":[6.5927333,6.5921178,6.5922857,6.5928079,6.5927333]}]],[[{"lng":[3.415044,3.4152799,3.4152826,3.4150467,3.415044],"lat":[6.4276863,6.4276824,6.4278437,6.4278476,6.4276863]}]],[[{"lng":[3.3709586,3.3707499,3.3711102,3.3713189,3.3709586],"lat":[6.5110462,6.5115328,6.5116853,6.5111988,6.5110462]}]],[[{"lng":[3.464045,3.4643802,3.4643855,3.4640503,3.464045],"lat":[6.4286288,6.4286355,6.4283703,6.4283636,6.4286288]}]],[[{"lng":[3.3718634,3.3710695,3.3722171,3.3721531,3.3738111,3.3739381,3.3749416,3.3757769,3.3739435,3.3718634],"lat":[6.5090162,6.5108991,6.5113888,6.5115981,6.5124266,6.5121667,6.5125673,6.5105826,6.5098613,6.5090162]}]],[[{"lng":[3.3726575,3.373387,3.3736284,3.3736713,3.3737598,3.3738028,3.373784,3.3729874,3.3726575],"lat":[6.5103263,6.5104516,6.5099266,6.5098999,6.5098999,6.509812,6.5097694,6.5094496,6.5103263]}]],[[{"lng":[3.3375176,3.3374917,3.3375953,3.3376212,3.3375176],"lat":[6.4611829,6.4610041,6.4609893,6.461168,6.4611829]}]],[[{"lng":[3.3803097,3.380197,3.3801895,3.3803022,3.3803097],"lat":[6.5290361,6.5290336,6.5293646,6.5293672,6.5290361]}]],[[{"lng":[3.3300359,3.3301099,3.329957,3.3298829,3.3300359],"lat":[6.4979955,6.4979224,6.4977695,6.4978427,6.4979955]}]],[[{"lng":[3.3871468,3.3874687,3.3877315,3.387458,3.3871468],"lat":[6.4927187,6.4929586,6.4926361,6.4925588,6.4927187]}]],[[{"lng":[3.3804538,3.3805557,3.3808373,3.3807461,3.3804538],"lat":[6.484301,6.4843409,6.4836587,6.4836187,6.484301]}]],[[{"lng":[3.3369255,3.3370425,3.3371015,3.3369845,3.3369255],"lat":[6.4476051,6.4476288,6.4473409,6.4473172,6.4476051]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,["Gbagada General Hospital","National Orthopaedic Hospital Igbobi","Gold Cross Hospital - Bourdillon","Reddington Hospital - Ikeja GRA","Reddington Hospital","Eye Foundation Hospital &amp; Laser Centre","St. Kizito Clinic &amp; Maternity Ward","Nigerian Police Hospital - Falomo","General Hospital Lagos","Lagos State University Teaching Hospital","Alimosho General Hospital Igando","Onikan Health Centre","St Nicholas Hospital","Lagos Island Maternity Hospital","Massey Street Children Hospital","Amuwo Odofin Maternal &amp; Childcare Centre","Emel Hospital","Lagos University Teaching Hospital","Randle General Hospital","General Hospital Ikorodu","Isolo General Hospital","Parklande Specialist Hospital","Health Center","Glen Eagles Hospital","Lagos Emergency Operations Center","Medison Specialist Women's Hospital","Lagos Health Center Harvey Road","Federal Psychiatric Hospital Yaba","Teaching / Specialist Hospital","MARANATHA MEDICAL CENTER","St. LukeÃƒÂ¢Ã‚â‚¬Ã‚Ëœs medical center","Ayeitoro PHC","Federal Medical Centre","Abbey Medical Centre"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[6.4276824,6.6105552],"lng":[3.2503709,3.5227141]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="elevation" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> Elevation</h2>
<p>The <code>elevatr</code> package can be used to download elevation data.
We can use <code>get_elev_raster()</code> to obtain the elevation of Ghana as follows.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="data-sources.html#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;elevatr&quot;</span>)</span></code></pre></div>
<pre><code>## Installing package into &#39;C:/Users/User/OneDrive - University of Leeds/Documents/R/win-library/4.0&#39;
## (as &#39;lib&#39; is unspecified)</code></pre>
<pre><code>## package &#39;elevatr&#39; successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\User\AppData\Local\Temp\RtmpYTcVDa\downloaded_packages</code></pre>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="data-sources.html#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb183-2"><a href="data-sources.html#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb183-3"><a href="data-sources.html#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(elevatr)</span></code></pre></div>
<pre><code>## Warning: package &#39;elevatr&#39; was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="data-sources.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgeoboundaries)</span>
<span id="cb185-2"><a href="data-sources.html#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb185-3"><a href="data-sources.html#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span></code></pre></div>
<pre><code>## Loading required package: viridisLite</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data-sources.html#cb187-1" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">geoboundaries</span>(<span class="st">&quot;Ghana&quot;</span>)</span>
<span id="cb187-2"><a href="data-sources.html#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="data-sources.html#cb187-3" aria-hidden="true" tabindex="-1"></a>elevation_data <span class="ot">&lt;-</span> <span class="fu">get_elev_raster</span>(<span class="at">locations =</span> map, <span class="at">z =</span> <span class="dv">9</span>, <span class="at">clip =</span> <span class="st">&quot;locations&quot;</span>) </span></code></pre></div>
<pre><code>## Warning in st_buffer.sfc(st_geometry(x), dist, nQuadSegs, endCapStyle = endCapStyle, : st_buffer does not correctly buffer longitude/
## latitude data</code></pre>
<pre><code>## dist is assumed to be in decimal degrees (arc_degrees).</code></pre>
<pre><code>## 
Downloading DEMs [&gt;--------------------------]   2% eta: 41s
Downloading DEMs [&gt;--------------------------]   3% eta: 37s
Downloading DEMs [&gt;--------------------------]   4% eta: 33s
Downloading DEMs [&gt;--------------------------]   5% eta: 30s
Downloading DEMs [=&gt;-------------------------]   6% eta: 27s
Downloading DEMs [=&gt;-------------------------]   7% eta: 26s
Downloading DEMs [=&gt;-------------------------]   8% eta: 24s
Downloading DEMs [==&gt;------------------------]   9% eta: 23s
Downloading DEMs [==&gt;------------------------]  10% eta: 22s
Downloading DEMs [==&gt;------------------------]  11% eta: 22s
Downloading DEMs [==&gt;------------------------]  12% eta: 21s
Downloading DEMs [===&gt;-----------------------]  14% eta: 20s
Downloading DEMs [===&gt;-----------------------]  15% eta: 20s
Downloading DEMs [===&gt;-----------------------]  16% eta: 19s
Downloading DEMs [===&gt;-----------------------]  17% eta: 19s
Downloading DEMs [====&gt;----------------------]  18% eta: 18s
Downloading DEMs [====&gt;----------------------]  19% eta: 19s
Downloading DEMs [====&gt;----------------------]  20% eta: 18s
Downloading DEMs [=====&gt;---------------------]  21% eta: 18s
Downloading DEMs [=====&gt;---------------------]  22% eta: 18s
Downloading DEMs [=====&gt;---------------------]  23% eta: 18s
Downloading DEMs [=====&gt;---------------------]  24% eta: 18s
Downloading DEMs [======&gt;--------------------]  25% eta: 17s
Downloading DEMs [======&gt;--------------------]  26% eta: 17s
Downloading DEMs [======&gt;--------------------]  27% eta: 17s
Downloading DEMs [=======&gt;-------------------]  28% eta: 16s
Downloading DEMs [=======&gt;-------------------]  29% eta: 16s
Downloading DEMs [=======&gt;-------------------]  30% eta: 16s
Downloading DEMs [=======&gt;-------------------]  31% eta: 16s
Downloading DEMs [========&gt;------------------]  32% eta: 16s
Downloading DEMs [========&gt;------------------]  33% eta: 15s
Downloading DEMs [========&gt;------------------]  34% eta: 15s
Downloading DEMs [=========&gt;-----------------]  35% eta: 15s
Downloading DEMs [=========&gt;-----------------]  36% eta: 15s
Downloading DEMs [=========&gt;-----------------]  38% eta: 15s
Downloading DEMs [=========&gt;-----------------]  39% eta: 14s
Downloading DEMs [==========&gt;----------------]  40% eta: 14s
Downloading DEMs [==========&gt;----------------]  41% eta: 14s
Downloading DEMs [==========&gt;----------------]  42% eta: 14s
Downloading DEMs [===========&gt;---------------]  43% eta: 14s
Downloading DEMs [===========&gt;---------------]  44% eta: 13s
Downloading DEMs [===========&gt;---------------]  45% eta: 13s
Downloading DEMs [===========&gt;---------------]  46% eta: 13s
Downloading DEMs [============&gt;--------------]  47% eta: 12s
Downloading DEMs [============&gt;--------------]  48% eta: 12s
Downloading DEMs [============&gt;--------------]  49% eta: 12s
Downloading DEMs [=============&gt;-------------]  50% eta: 12s
Downloading DEMs [=============&gt;-------------]  51% eta: 11s
Downloading DEMs [=============&gt;-------------]  52% eta: 11s
Downloading DEMs [=============&gt;-------------]  53% eta: 11s
Downloading DEMs [==============&gt;------------]  54% eta: 11s
Downloading DEMs [==============&gt;------------]  55% eta: 10s
Downloading DEMs [==============&gt;------------]  56% eta: 10s
Downloading DEMs [==============&gt;------------]  57% eta: 10s
Downloading DEMs [===============&gt;-----------]  58% eta: 10s
Downloading DEMs [===============&gt;-----------]  59% eta:  9s
Downloading DEMs [===============&gt;-----------]  60% eta:  9s
Downloading DEMs [================&gt;----------]  61% eta:  9s
Downloading DEMs [================&gt;----------]  62% eta:  9s
Downloading DEMs [================&gt;----------]  64% eta:  9s
Downloading DEMs [================&gt;----------]  65% eta:  8s
Downloading DEMs [=================&gt;---------]  66% eta:  8s
Downloading DEMs [=================&gt;---------]  67% eta:  8s
Downloading DEMs [=================&gt;---------]  68% eta:  8s
Downloading DEMs [==================&gt;--------]  69% eta:  7s
Downloading DEMs [==================&gt;--------]  70% eta:  7s
Downloading DEMs [==================&gt;--------]  71% eta:  7s
Downloading DEMs [==================&gt;--------]  72% eta:  7s
Downloading DEMs [===================&gt;-------]  73% eta:  6s
Downloading DEMs [===================&gt;-------]  74% eta:  6s
Downloading DEMs [===================&gt;-------]  75% eta:  6s
Downloading DEMs [====================&gt;------]  76% eta:  6s
Downloading DEMs [====================&gt;------]  77% eta:  6s
Downloading DEMs [====================&gt;------]  78% eta:  6s
Downloading DEMs [====================&gt;------]  79% eta:  5s
Downloading DEMs [=====================&gt;-----]  80% eta:  5s
Downloading DEMs [=====================&gt;-----]  81% eta:  5s
Downloading DEMs [=====================&gt;-----]  82% eta:  5s
Downloading DEMs [=====================&gt;-----]  83% eta:  4s
Downloading DEMs [======================&gt;----]  84% eta:  4s
Downloading DEMs [======================&gt;----]  85% eta:  4s
Downloading DEMs [======================&gt;----]  86% eta:  4s
Downloading DEMs [=======================&gt;---]  88% eta:  3s
Downloading DEMs [=======================&gt;---]  89% eta:  3s
Downloading DEMs [=======================&gt;---]  90% eta:  3s
Downloading DEMs [=======================&gt;---]  91% eta:  3s
Downloading DEMs [========================&gt;--]  92% eta:  2s
Downloading DEMs [========================&gt;--]  93% eta:  2s
Downloading DEMs [========================&gt;--]  94% eta:  2s
Downloading DEMs [=========================&gt;-]  95% eta:  1s
Downloading DEMs [=========================&gt;-]  96% eta:  1s
Downloading DEMs [=========================&gt;-]  97% eta:  1s
Downloading DEMs [=========================&gt;-]  98% eta:  1s
Downloading DEMs [==========================&gt;]  99% eta:  0s
Downloading DEMs [===========================] 100% eta:  0s
## Mosaicing &amp; Projecting
## Clipping DEM to locations
## Note: Elevation units are in meters.
## Note: The coordinate reference system is:
##  GEOGCRS[&quot;WGS 84 (with axis order normalized for visualization)&quot;,
##     DATUM[&quot;World Geodetic System 1984&quot;,
##         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##             LENGTHUNIT[&quot;metre&quot;,1]]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS[&quot;geodetic longitude (Lon)&quot;,east,
##             ORDER[1],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433,
##                 ID[&quot;EPSG&quot;,9122]]],
##         AXIS[&quot;geodetic latitude (Lat)&quot;,north,
##             ORDER[2],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433,
##                 ID[&quot;EPSG&quot;,9122]]]]</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="data-sources.html#cb191-1" aria-hidden="true" tabindex="-1"></a>elevation_data <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(elevation_data, <span class="at">xy =</span> <span class="cn">TRUE</span>)</span>
<span id="cb191-2"><a href="data-sources.html#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(elevation_data)[<span class="dv">3</span>] <span class="ot">=</span> <span class="st">&quot;elevation&quot;</span></span>
<span id="cb191-3"><a href="data-sources.html#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="co">#remove rows of data frame with one or more NA&#39;s using complete.cases</span></span>
<span id="cb191-4"><a href="data-sources.html#cb191-4" aria-hidden="true" tabindex="-1"></a>elevation_data <span class="ot">&lt;-</span> elevation_data[<span class="fu">complete.cases</span>(elevation_data), ] </span>
<span id="cb191-5"><a href="data-sources.html#cb191-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-6"><a href="data-sources.html#cb191-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_raster</span>(<span class="at">data =</span> elevation_data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> elevation)) <span class="sc">+</span></span>
<span id="cb191-7"><a href="data-sources.html#cb191-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> map, <span class="at">color =</span> <span class="st">&quot;white&quot;</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb191-8"><a href="data-sources.html#cb191-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>() <span class="sc">+</span> <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">&quot;Elevation&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
</div>
<div id="temperature" class="section level2" number="7.5">
<h2><span class="header-section-number">7.5</span> Temperature</h2>
<p>The <code>raster</code> package provides access to the <a href="https://www.worldclim.org/">WorldClim</a> database, and allows us to download data sets on the many different climatic conditions.</p>
<p>For example, we can can download maximum temperature at a resolution of 10 minutes as follows.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="data-sources.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb192-2"><a href="data-sources.html#cb192-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb192-3"><a href="data-sources.html#cb192-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-4"><a href="data-sources.html#cb192-4" aria-hidden="true" tabindex="-1"></a>tmax_data <span class="ot">&lt;-</span> <span class="fu">getData</span>(<span class="at">name =</span> <span class="st">&quot;worldclim&quot;</span>, <span class="at">var =</span> <span class="st">&quot;tmax&quot;</span>, <span class="at">res =</span> <span class="dv">10</span>)</span>
<span id="cb192-5"><a href="data-sources.html#cb192-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-6"><a href="data-sources.html#cb192-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Degrees Celsius</span></span>
<span id="cb192-7"><a href="data-sources.html#cb192-7" aria-hidden="true" tabindex="-1"></a><span class="fu">gain</span>(tmax_data) <span class="ot">&lt;-</span> <span class="fl">0.1</span></span>
<span id="cb192-8"><a href="data-sources.html#cb192-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-9"><a href="data-sources.html#cb192-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting the raster object into a dataframe</span></span>
<span id="cb192-10"><a href="data-sources.html#cb192-10" aria-hidden="true" tabindex="-1"></a>tmax_data_may_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tmax_data<span class="sc">$</span>tmax5, <span class="at">xy =</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb192-11"><a href="data-sources.html#cb192-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(tmax_data_may_df) <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb192-12"><a href="data-sources.html#cb192-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-13"><a href="data-sources.html#cb192-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb192-14"><a href="data-sources.html#cb192-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> tmax_data_may_df, <span class="fu">aes</span>(<span class="at">x=</span>x,<span class="at">y=</span>y)) <span class="sc">+</span> <span class="fu">geom_raster</span>(<span class="fu">aes</span>(<span class="at">fill =</span> tmax5)) <span class="sc">+</span></span>
<span id="cb192-15"><a href="data-sources.html#cb192-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Maximum temperature in May&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;For the years 1970-2000&quot;</span>) <span class="sc">+</span></span>
<span id="cb192-16"><a href="data-sources.html#cb192-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Longitude&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;Latitude&quot;</span>) <span class="sc">+</span></span>
<span id="cb192-17"><a href="data-sources.html#cb192-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(<span class="at">name =</span> <span class="st">&quot;Temperature (°C)&quot;</span>, <span class="at">colours=</span><span class="fu">c</span>(<span class="st">&quot;#0094D1&quot;</span>,<span class="st">&quot;#68C1E6&quot;</span>, <span class="st">&quot;#FEED99&quot;</span>,<span class="st">&quot;#AF3301&quot;</span>), <span class="at">breaks =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">20</span>, <span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>))</span></code></pre></div>
<pre><code>## Warning: Raster pixels are placed at uneven vertical intervals and will be shifted. Consider using geom_tile() instead.</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-85-1.png" width="672" /></p>
</div>
<div id="rainfall" class="section level2" number="7.6">
<h2><span class="header-section-number">7.6</span> Rainfall</h2>
<p>The <code>nasapower</code> package aims at making it quick and easy to automate downloading <a href="https://power.larc.nasa.gov/">NASA POWER (NASA Prediction of Worldwide Energy Resource)</a> global meteorology, surface solar energy and climatology data.</p>
<p>For example, we can use <code>get_power()</code>, to obtain global rainfall (specifying <code>pars = "PRECTOT"</code>) or humidity (specifying <code>pars = "RH2M"</code>).</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="data-sources.html#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nasapower)</span>
<span id="cb194-2"><a href="data-sources.html#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb194-3"><a href="data-sources.html#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb194-4"><a href="data-sources.html#cb194-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-5"><a href="data-sources.html#cb194-5" aria-hidden="true" tabindex="-1"></a>climate_avg <span class="ot">&lt;-</span> <span class="fu">get_power</span>(<span class="at">community =</span> <span class="st">&quot;AG&quot;</span>, <span class="at">pars =</span> <span class="st">&quot;PRECTOT&quot;</span>,</span>
<span id="cb194-6"><a href="data-sources.html#cb194-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">lonlat =</span> <span class="st">&quot;GLOBAL&quot;</span>, <span class="at">temporal_average =</span> <span class="st">&quot;CLIMATOLOGY&quot;</span>)</span>
<span id="cb194-7"><a href="data-sources.html#cb194-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-8"><a href="data-sources.html#cb194-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-9"><a href="data-sources.html#cb194-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;rnaturalearth&quot;</span>)</span>
<span id="cb194-10"><a href="data-sources.html#cb194-10" aria-hidden="true" tabindex="-1"></a>map <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">returnclass =</span> <span class="st">&quot;sf&quot;</span>)</span>
<span id="cb194-11"><a href="data-sources.html#cb194-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-12"><a href="data-sources.html#cb194-12" aria-hidden="true" tabindex="-1"></a>climate_box <span class="ot">&lt;-</span> <span class="fu">split</span>(climate_avg, climate_avg<span class="sc">$</span>PARAMETER)</span>
<span id="cb194-13"><a href="data-sources.html#cb194-13" aria-hidden="true" tabindex="-1"></a>climate_box <span class="ot">&lt;-</span> <span class="fu">lapply</span>(climate_box, <span class="cf">function</span>(x){</span>
<span id="cb194-14"><a href="data-sources.html#cb194-14" aria-hidden="true" tabindex="-1"></a>  x[<span class="st">&quot;PARAMETER&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb194-15"><a href="data-sources.html#cb194-15" aria-hidden="true" tabindex="-1"></a>  x})</span>
<span id="cb194-16"><a href="data-sources.html#cb194-16" aria-hidden="true" tabindex="-1"></a>climate_box <span class="ot">&lt;-</span> <span class="fu">lapply</span>(<span class="at">X =</span> climate_box, <span class="at">FUN =</span> as.matrix)</span>
<span id="cb194-17"><a href="data-sources.html#cb194-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-18"><a href="data-sources.html#cb194-18" aria-hidden="true" tabindex="-1"></a><span class="co">#retrieving precipitation data using the above made climate_box() function</span></span>
<span id="cb194-19"><a href="data-sources.html#cb194-19" aria-hidden="true" tabindex="-1"></a>PRECTOT <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">rast</span>(climate_box<span class="sc">$</span>PRECTOT[,<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">15</span>)],</span>
<span id="cb194-20"><a href="data-sources.html#cb194-20" aria-hidden="true" tabindex="-1"></a>     <span class="at">crs =</span> <span class="st">&quot;+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs&quot;</span>, <span class="at">type =</span> <span class="st">&quot;xyz&quot;</span>)</span>
<span id="cb194-21"><a href="data-sources.html#cb194-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-22"><a href="data-sources.html#cb194-22" aria-hidden="true" tabindex="-1"></a><span class="co">#converting above raster object into a data.frame for mapping </span></span>
<span id="cb194-23"><a href="data-sources.html#cb194-23" aria-hidden="true" tabindex="-1"></a>PRECTOT_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(PRECTOT, <span class="at">xy =</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb194-24"><a href="data-sources.html#cb194-24" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(PRECTOT_df) <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb194-25"><a href="data-sources.html#cb194-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-26"><a href="data-sources.html#cb194-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-27"><a href="data-sources.html#cb194-27" aria-hidden="true" tabindex="-1"></a><span class="co">#plotting the graph</span></span>
<span id="cb194-28"><a href="data-sources.html#cb194-28" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb194-29"><a href="data-sources.html#cb194-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> PRECTOT_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> ANN)) <span class="sc">+</span></span>
<span id="cb194-30"><a href="data-sources.html#cb194-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> map, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb194-31"><a href="data-sources.html#cb194-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>() <span class="sc">+</span></span>
<span id="cb194-32"><a href="data-sources.html#cb194-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Rainfall in inches&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Annual Rainfall&quot;</span>)</span></code></pre></div>
</div>
<div id="vegetation-and-land-cover" class="section level2" number="7.7">
<h2><span class="header-section-number">7.7</span> Vegetation and Land cover</h2>
<p><code>MODIStsp</code> is an R package for downloading and preprocessing time series of raster data from <a href="https://modis.gsfc.nasa.gov/data/dataprod/">MODIS</a> data products.</p>
<p>Here, we use the ‘Vegetation Indices 16-Day L3 Global 250’ product with the product IDs MOD13Q1(Terra Product ID), and MYD13Q1(Aqua Product ID), but will be represented by <code>M*D13Q1</code> - the second character is replaced by an asterix(<code>*</code>) to identify both Terra and Aqua.</p>
<p>We can also download the ‘Land Cover Type Yearly L3 Global 500m’ product with the product ID <code>MCD12Q1</code> (Combined Aqua and Terra Product ID)</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="data-sources.html#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;MODIStsp&quot;</span>)</span></code></pre></div>
<pre><code>## Installing package into &#39;C:/Users/User/OneDrive - University of Leeds/Documents/R/win-library/4.0&#39;
## (as &#39;lib&#39; is unspecified)</code></pre>
<pre><code>## package &#39;MODIStsp&#39; successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\User\AppData\Local\Temp\RtmpYTcVDa\downloaded_packages</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="data-sources.html#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MODIStsp)</span></code></pre></div>
<pre><code>## Warning: package &#39;MODIStsp&#39; was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="data-sources.html#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgeoboundaries)</span>
<span id="cb200-2"><a href="data-sources.html#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb200-3"><a href="data-sources.html#cb200-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-4"><a href="data-sources.html#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Downloading the country boundary</span></span>
<span id="cb200-5"><a href="data-sources.html#cb200-5" aria-hidden="true" tabindex="-1"></a>map_boundary <span class="ot">&lt;-</span> <span class="fu">geoboundaries</span>(<span class="st">&quot;Kenya&quot;</span>)</span>
<span id="cb200-6"><a href="data-sources.html#cb200-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-7"><a href="data-sources.html#cb200-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Defining filepath to save downloaded spatial file</span></span>
<span id="cb200-8"><a href="data-sources.html#cb200-8" aria-hidden="true" tabindex="-1"></a>spatial_filepath <span class="ot">&lt;-</span> <span class="st">&quot;map.shp&quot;</span></span>
<span id="cb200-9"><a href="data-sources.html#cb200-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-10"><a href="data-sources.html#cb200-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Saving downloaded spatial file on to our computer</span></span>
<span id="cb200-11"><a href="data-sources.html#cb200-11" aria-hidden="true" tabindex="-1"></a><span class="co">#st_write(map_boundary, paste0(spatial_filepath))</span></span></code></pre></div>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="data-sources.html#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MODIStsp</span>(<span class="at">gui             =</span> <span class="cn">FALSE</span>,</span>
<span id="cb201-2"><a href="data-sources.html#cb201-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">out_folder      =</span> <span class="st">&quot;VegetationData&quot;</span>,</span>
<span id="cb201-3"><a href="data-sources.html#cb201-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">out_folder_mod  =</span> <span class="st">&quot;VegetationData&quot;</span>,</span>
<span id="cb201-4"><a href="data-sources.html#cb201-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">selprod         =</span> <span class="st">&quot;Vegetation_Indexes_16Days_1Km (M*D13A2)&quot;</span>,</span>
<span id="cb201-5"><a href="data-sources.html#cb201-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">bandsel         =</span> <span class="st">&quot;NDVI&quot;</span>, </span>
<span id="cb201-6"><a href="data-sources.html#cb201-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">user            =</span> <span class="st">&quot;mstp_test&quot;</span> ,</span>
<span id="cb201-7"><a href="data-sources.html#cb201-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">password        =</span> <span class="st">&quot;MSTP_test_01&quot;</span>,</span>
<span id="cb201-8"><a href="data-sources.html#cb201-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">start_date      =</span> <span class="st">&quot;2020.06.01&quot;</span>, </span>
<span id="cb201-9"><a href="data-sources.html#cb201-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">end_date        =</span> <span class="st">&quot;2020.06.01&quot;</span>, </span>
<span id="cb201-10"><a href="data-sources.html#cb201-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">verbose         =</span> <span class="cn">FALSE</span>,</span>
<span id="cb201-11"><a href="data-sources.html#cb201-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">spatmeth        =</span> <span class="st">&quot;file&quot;</span>,</span>
<span id="cb201-12"><a href="data-sources.html#cb201-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">spafile         =</span> spatial_filepath,</span>
<span id="cb201-13"><a href="data-sources.html#cb201-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">out_format      =</span> <span class="st">&quot;GTiff&quot;</span>)</span></code></pre></div>
<p>[Paula: I’ve set this to eval=FALSE for now to avoid filenotfound error, can we make this runnable ?, Andy]</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="data-sources.html#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Reading in the downloaded NDVI raster data</span></span>
<span id="cb202-2"><a href="data-sources.html#cb202-2" aria-hidden="true" tabindex="-1"></a>NDVI_raster <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="st">&quot;VegetationData/map/VI_16Days_1Km_v6/NDVI/MYD13A2_NDVI_2020_153.tif&quot;</span>)</span>
<span id="cb202-3"><a href="data-sources.html#cb202-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-4"><a href="data-sources.html#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Transforming the data</span></span>
<span id="cb202-5"><a href="data-sources.html#cb202-5" aria-hidden="true" tabindex="-1"></a>NDVI_raster <span class="ot">&lt;-</span> <span class="fu">projectRaster</span>(NDVI_raster, <span class="at">crs =</span> <span class="st">&quot;+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs&quot;</span>)</span>
<span id="cb202-6"><a href="data-sources.html#cb202-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-7"><a href="data-sources.html#cb202-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Cropping the data</span></span>
<span id="cb202-8"><a href="data-sources.html#cb202-8" aria-hidden="true" tabindex="-1"></a>NDVI_raster <span class="ot">&lt;-</span> raster<span class="sc">::</span><span class="fu">mask</span>(NDVI_raster, <span class="fu">as_Spatial</span>(map_boundary))</span>
<span id="cb202-9"><a href="data-sources.html#cb202-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-10"><a href="data-sources.html#cb202-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Dividing values by 10000 to have NDVI values between -1 and 1</span></span>
<span id="cb202-11"><a href="data-sources.html#cb202-11" aria-hidden="true" tabindex="-1"></a><span class="fu">gain</span>(NDVI_raster) <span class="ot">&lt;-</span> <span class="fl">0.0001</span></span>
<span id="cb202-12"><a href="data-sources.html#cb202-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-13"><a href="data-sources.html#cb202-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting the raster object into a dataframe</span></span>
<span id="cb202-14"><a href="data-sources.html#cb202-14" aria-hidden="true" tabindex="-1"></a>NDVI_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(NDVI_raster, <span class="at">xy =</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb202-15"><a href="data-sources.html#cb202-15" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(NDVI_df) <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb202-16"><a href="data-sources.html#cb202-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-17"><a href="data-sources.html#cb202-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualising using ggplot2</span></span>
<span id="cb202-18"><a href="data-sources.html#cb202-18" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb202-19"><a href="data-sources.html#cb202-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> NDVI_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">fill =</span> MYD13A2_NDVI_2020_153)) <span class="sc">+</span></span>
<span id="cb202-20"><a href="data-sources.html#cb202-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> map_boundary, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb202-21"><a href="data-sources.html#cb202-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">name =</span> <span class="st">&quot;NDVI&quot;</span>) <span class="sc">+</span></span>
<span id="cb202-22"><a href="data-sources.html#cb202-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;NDVI (Normalized Difference Vegetation Index)&quot;</span>,</span>
<span id="cb202-23"><a href="data-sources.html#cb202-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;01-06-2020&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Longitude&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Latitude&quot;</span>)</span></code></pre></div>
</div>
<div id="demographic-and-health-survey-dhs" class="section level2" number="7.8">
<h2><span class="header-section-number">7.8</span> Demographic and Health Survey (DHS)</h2>
<p>The <code>rdhs</code> packages gives the users the ability to access and make analysis on the Demographic and Health Survey (DHS) data.
For example we can find out the trends in antimalarial use in Africa as follows.</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="data-sources.html#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;rdhs&quot;</span>)</span></code></pre></div>
<pre><code>## Installing package into &#39;C:/Users/User/OneDrive - University of Leeds/Documents/R/win-library/4.0&#39;
## (as &#39;lib&#39; is unspecified)</code></pre>
<pre><code>## package &#39;rdhs&#39; successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\User\AppData\Local\Temp\RtmpYTcVDa\downloaded_packages</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="data-sources.html#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rdhs)</span></code></pre></div>
<pre><code>## Warning: package &#39;rdhs&#39; was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="data-sources.html#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make an api request</span></span>
<span id="cb208-2"><a href="data-sources.html#cb208-2" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">dhs_data</span>(<span class="at">indicatorIds =</span> <span class="st">&quot;ML_FEVT_C_AML&quot;</span>, <span class="at">surveyYearStart =</span> <span class="dv">2010</span>, <span class="at">breakdown =</span> <span class="st">&quot;subnational&quot;</span>)</span></code></pre></div>
<pre><code>## Writing your configuration to:
##    -&gt; C:\Users\User\AppData\Local\Temp\RtmpYTcVDa/rdhs/rdhs.json</code></pre>
<pre><code>## You have not granted permision to rdhs to write outside of 
## your temporary directory. As a result any datasets or API  
## calls will not be saved after you close this R sessiton. 
## To cache your results please use set_rdhs_config()</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="data-sources.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filter it to 12 countries for space</span></span>
<span id="cb211-2"><a href="data-sources.html#cb211-2" aria-hidden="true" tabindex="-1"></a>countries  <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Angola&quot;</span>,<span class="st">&quot;Ghana&quot;</span>,<span class="st">&quot;Kenya&quot;</span>,<span class="st">&quot;Liberia&quot;</span>,</span>
<span id="cb211-3"><a href="data-sources.html#cb211-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Madagascar&quot;</span>,<span class="st">&quot;Mali&quot;</span>,<span class="st">&quot;Malawi&quot;</span>,<span class="st">&quot;Nigeria&quot;</span>,</span>
<span id="cb211-4"><a href="data-sources.html#cb211-4" aria-hidden="true" tabindex="-1"></a>                <span class="st">&quot;Rwanda&quot;</span>,<span class="st">&quot;Sierra Leone&quot;</span>,<span class="st">&quot;Senegal&quot;</span>,<span class="st">&quot;Tanzania&quot;</span>)</span>
<span id="cb211-5"><a href="data-sources.html#cb211-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-6"><a href="data-sources.html#cb211-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-7"><a href="data-sources.html#cb211-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb211-8"><a href="data-sources.html#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(resp[resp<span class="sc">$</span>CountryName <span class="sc">%in%</span> countries, ],</span>
<span id="cb211-9"><a href="data-sources.html#cb211-9" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> SurveyYear, <span class="at">y =</span> Value, <span class="at">colour =</span> CountryName)) <span class="sc">+</span></span>
<span id="cb211-10"><a href="data-sources.html#cb211-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;glm&quot;</span>) <span class="sc">+</span> </span>
<span id="cb211-11"><a href="data-sources.html#cb211-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">vjust =</span> .<span class="dv">5</span>)) <span class="sc">+</span></span>
<span id="cb211-12"><a href="data-sources.html#cb211-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(resp<span class="sc">$</span>Indicator[<span class="dv">1</span>]) <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span> CountryName, <span class="at">ncol =</span> <span class="dv">6</span>) </span></code></pre></div>
<pre><code>## `geom_smooth()` using formula &#39;y ~ x&#39;</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-90-1.png" width="672" /></p>
</div>
<div id="malaria" class="section level2" number="7.9">
<h2><span class="header-section-number">7.9</span> Malaria</h2>
<p>The <code>malariaAtlas</code> package can be used to download, visualise and manipulate global malaria data hosted by the Malaria Atlas Project.</p>
<p>The package enables users to download the following types of data:</p>
<ul>
<li>parasite rate (PR) survey data (Plasmodium falciparum and Plasmodium vivax)</li>
<li>vector occurrence data</li>
<li>administrative boundary shapefiles to visualise data</li>
<li>rasters covering a range of modelled outputs related to malaria research such as predicted malaria parasite prevalence</li>
</ul>
<p>For example, we can download parasite rate survey data corresponding to Zimbabwe as follows.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="data-sources.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;malariaAtlas&quot;</span>)</span></code></pre></div>
<pre><code>## Installing package into &#39;C:/Users/User/OneDrive - University of Leeds/Documents/R/win-library/4.0&#39;
## (as &#39;lib&#39; is unspecified)</code></pre>
<pre><code>## package &#39;malariaAtlas&#39; successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\User\AppData\Local\Temp\RtmpYTcVDa\downloaded_packages</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="data-sources.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(malariaAtlas)</span></code></pre></div>
<pre><code>## Warning: package &#39;malariaAtlas&#39; was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="data-sources.html#cb218-1" aria-hidden="true" tabindex="-1"></a>d  <span class="ot">&lt;-</span> <span class="fu">getPR</span>(<span class="at">country =</span> <span class="st">&quot;Zimbabwe&quot;</span>, <span class="at">species =</span> <span class="st">&quot;BOTH&quot;</span>) </span></code></pre></div>
<pre><code>## Creating list of countries for which MAP data is available, please wait...</code></pre>
<pre><code>## Confirming availability of PR data for: Zimbabwe...</code></pre>
<pre><code>## PR points are available for Zimbabwe.</code></pre>
<pre><code>## Attempting to download PR point data for Zimbabwe ...</code></pre>
<pre><code>## Data downloaded for Zimbabwe.</code></pre>
<pre><code>## NOTE: All available data for this query was downloaded for both species,
##  but there are no PR points for P. vivax in this region in the MAP database. 
## To check endemicity patterns or to contribute data, visit malariaatlas.org OR email us at map@bdi.ox.ac.uk.</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="data-sources.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(d)</span></code></pre></div>
<pre><code>## OGR data source with driver: ESRI Shapefile 
## Source: &quot;C:\Users\User\AppData\Local\Temp\RtmpYTcVDa\shp\shp24b81a0e7c91\mapadmin_0_2018.shp&quot;, layer: &quot;mapadmin_0_2018&quot;
## with 1 features
## It has 8 fields</code></pre>
<pre><code>## Regions defined for each Polygons</code></pre>
<p><img src="bookdown-demo_files/figure-html/unnamed-chunk-91-1.png" width="672" /></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="shiny.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="joining.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/afrimapr/book-demo/edit/master/07-data-sources.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
