# A taster - making your first map  {#taster} 

While this book will help the reader gain necessary skills to start geospatial visualisations, this chapter shows the steps through an example process of map-making. It demonstrates the focus and potential of this book, so that the readers can quickly see what this book aims to achieve and how it is done. In the examples below we use R package called `tmap` to create several different map types including static and interactive ones. We can produce maps with wide range of spatial objects such as sf, sp or raster. Moreover, with `tmap`, multiple shapes and layers can be plotted on a single map and its appearance can be changed quickly with many different styles and options to choose from. Below we present some key features and functionalities of the package, while more detailed information is presented in the next chapters. 


```{r, c2-packages, results='hide', warning=FALSE, message=FALSE, include = FALSE, eval=FALSE}
#Install packages
cran_packages_to_install <- c(
  "ggplot" ,           # plot-making package
  "tmap",              # map-making package for static and interactive maps
  "tidyverse",         # metapackage containing dplyr, ggplot2 and other packages
  "sf",                # package for working with spatial data
  "s2",                # package for working with spatial data
  "tmaptools",         # map building package
  "raster"
  )

install.packages(cran_packages_to_install)
remotes::install_github("afrimapr/afrilearndata")
```

```{r, c2-libraries, results='hide', warning=FALSE, message=FALSE, include = FALSE}
#Load packages
library(tmap)
library(ggplot2)
library(sf)
library(s2)
library(afrilearndata)
library(dplyr)
library(tmaptools)
library(raster) 
```

```{r c2-dataset, include=FALSE}
#static mode activated
tmap_mode("plot")

```

The `tmap` package is frequently used in geospatial visualisations because it allows us to quickly and easily create both, static and interactive maps. The syntax of `tmap` resembles that of `ggplot2` which is a popular data-visualising package. Both use layers to include additional elements in the map and both follow a strict separation between the data and the aesthetic of the map. Firstly, the dataset is provided in `tm_shape()` function and additional layers of the map are specified through the use of a `+` sign followed by different functions, depending on what we want to add. There are several display specification to choose from such as:

- `tm_polygons()` : draws the polygons
- `tm_fill()` : fills the polygons with a specified colour (Grey is a default option.)
- `tm_borders()`: draws the borders of the polygons
- `tm_lines()`: draws spatial lines eg. roads
- `tm_dots()`: draws points eg. capital cities 
- `tm_symbols()`: draws symbols, with grey circles as a default option.

They enables us to add and customise the map. Below we present two examples of how `tmap` is used to create simple static and interactive maps. In the code below, *africountries* is our dataset, an object of `sf` class, whereas `tm_polygons()` and `tm_lines()` are used to plot and adjust polygons and lines, respectively.

## Static maps
```{r c2-simple-map, message=FALSE, warning=FALSE}

sf_use_s2(FALSE) #switches off spherical geometry, needed after sf package update


map_1 = tm_shape(africountries) +
    tm_polygons()

map_2 = tm_shape(africountries) +
    tm_polygons(col = "pop_est", title = "Population")

map_3 = map_1 +
  tm_shape(afrihighway) +
    tm_lines(col = "blue")

tmap_arrange(map_1, map_2, map_3)

```

Furthermore, the creation of an interactive map is equally convenient, where it only requires "turning on" of an interactive mode by changing from "plot" to "view" in the `tmap_mode()` function, as seen in the example below.

## Interactive maps
```{r c2-interactive_map, fig.show="hold", out.width="50%"}
tmap_mode("view")

breaks=c(0,2,20,200,2000,25000)

tm_shape(afripop2020) +
    tm_raster(breaks=breaks, title = "Population per km sq") +
tm_shape(afrihighway) +
    tm_lines(col = "blue") +
tm_shape(africapitals) +
    tm_dots(col = "black", alpha=0.5)
```